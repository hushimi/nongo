import"../chunks/DsnmJJEf.js";import"../chunks/B1lDpPAQ.js";import{o as le,e as V,s as ie}from"../chunks/Bxe7U9In.js";import{p as Z,s as fe,x as $,h as M,z as oe,A as ue,i as E,U as ve,V as ce,W as de,X as z,w as L,y as O,C as _e,Y as he,G as W,Z as me,_ as S,$ as pe,a0 as X,a1 as B,a2 as K,a3 as Te,a4 as Ee,a5 as j,a6 as be,a7 as ye,a8 as we,a9 as J,J as ee,v as ge,aa as xe,ab as ke,ac as Ae,ad as Me,ae as Ne,af as Se,e as Ce,ag as De,ah as Ie,P as Oe,l as ae,T as R,M as Re,m as F,Q as He,S as G,ai as H,R as Ve,O as $e}from"../chunks/DQ7Kcwip.js";import{r as Q,a as Le}from"../chunks/u6LuEVBe.js";import{i as Je}from"../chunks/DhYqu8_g.js";function Pe(a,r){return r}function Ue(a,r,e){for(var n=a.items,f=[],s=r.length,v=0;v<s;v++)xe(r[v].e,f,!0);var _=s>0&&f.length===0&&e!==null;if(_){var p=e.parentNode;ke(p),p.append(e),n.clear(),k(a,r[0].prev,r[s-1].next)}Ae(f,()=>{for(var d=0;d<s;d++){var m=r[d];_||(n.delete(m.k),k(a,m.prev,m.next)),ee(m.e,!_)}})}function Ye(a,r,e,n,f,s=null){var v=a,_={flags:r,items:new Map,first:null};{var p=a;v=M?$(oe(p)):p.appendChild(Z())}M&&ue();var d=null,m=!1,y=new Map,t=ve(()=>{var u=e();return Te(u)?u:u==null?[]:K(u)}),i,l;function o(){We(l,i,_,y,v,f,r,n,e),s!==null&&(i.length===0?d?j(d):d=W(()=>s(v)):d!==null&&be(d,()=>{d=null}))}fe(()=>{l??=Me,i=E(t);var u=i.length;if(m&&u===0)return;m=u===0;let w=!1;if(M){var g=ce(v)===de;g!==(u===0)&&(v=z(),$(v),L(!1),w=!0)}if(M){for(var c=null,T,h=0;h<u;h++){if(O.nodeType===_e&&O.data===he){v=O,w=!0,L(!1);break}var A=i[h],x=n(A,h);T=q(O,_,c,null,A,x,h,f,r,e),_.items.set(x,T),c=T}u>0&&$(z())}if(M)u===0&&s&&(d=W(()=>s(v)));else if(me()){var N=new Set,b=S;for(h=0;h<u;h+=1){A=i[h],x=n(A,h);var C=_.items.get(x)??y.get(x);C?te(C,A,h):(T=q(null,_,null,null,A,x,h,f,r,e,!0),y.set(x,T)),N.add(x)}for(const[D,I]of _.items)N.has(D)||b.skipped_effects.add(I.e);b.add_callback(o)}else o();w&&L(!0),E(t)}),M&&(v=O)}function We(a,r,e,n,f,s,v,_,p){var d=r.length,m=e.items,y=e.first,t=y,i,l=null,o=[],u=[],w,g,c,T;for(T=0;T<d;T+=1){if(w=r[T],g=_(w,T),c=m.get(g),c===void 0){var h=n.get(g);if(h!==void 0){n.delete(g),m.set(g,h);var A=l?l.next:t;k(e,l,h),k(e,h,A),P(h,A,f),l=h}else{var x=t?t.e.nodes_start:f;l=q(x,e,l,l===null?e.first:l.next,w,g,T,s,v,p)}m.set(g,l),o=[],u=[],t=l.next;continue}if(te(c,w,T),(c.e.f&J)!==0&&j(c.e),c!==t){if(i!==void 0&&i.has(c)){if(o.length<u.length){var N=u[0],b;l=N.prev;var C=o[0],D=o[o.length-1];for(b=0;b<o.length;b+=1)P(o[b],N,f);for(b=0;b<u.length;b+=1)i.delete(u[b]);k(e,C.prev,D.next),k(e,l,C),k(e,D,N),t=N,l=D,T-=1,o=[],u=[]}else i.delete(c),P(c,t,f),k(e,c.prev,c.next),k(e,c,l===null?e.first:l.next),k(e,l,c),l=c;continue}for(o=[],u=[];t!==null&&t.k!==g;)(t.e.f&J)===0&&(i??=new Set).add(t),u.push(t),t=t.next;if(t===null)continue;c=t}o.push(c),l=c,t=c.next}if(t!==null||i!==void 0){for(var I=i===void 0?[]:K(i);t!==null;)(t.e.f&J)===0&&I.push(t),t=t.next;var re=I.length;if(re>0){var ne=d===0?f:null;Ue(e,I,ne)}}a.first=e.first&&e.first.e,a.last=l&&l.e;for(var se of n.values())ee(se.e);n.clear()}function te(a,r,e,n){pe(a.v,r),a.i=e}function q(a,r,e,n,f,s,v,_,p,d,m){var y=(p&ye)!==0,t=(p&we)===0,i=y?t?X(f,!1,!1):B(f):f,l=(p&Ee)===0?v:B(v),o={i:l,v:i,k:s,a:null,e:null,prev:e,next:n};try{if(a===null){var u=document.createDocumentFragment();u.append(a=Z())}return o.e=W(()=>_(a,i,l,d),M),o.e.prev=e&&e.e,o.e.next=n&&n.e,e===null?m||(r.first=o):(e.next=o,e.e.next=o.e),n!==null&&(n.prev=o,n.e.prev=o.e),o}finally{}}function P(a,r,e){for(var n=a.next?a.next.e.nodes_start:e,f=r?r.e.nodes_start:e,s=a.e.nodes_start;s!==null&&s!==n;){var v=ge(s);f.before(s),s=v}}function k(a,r,e){r===null?a.first=e:(r.next=e,r.e.next=e&&e.e),e!==null&&(e.prev=r,e.e.prev=r&&r.e)}function Xe(a,r,e=r){var n=new WeakSet;Ne(a,"input",async f=>{var s=f?a.defaultValue:a.value;if(s=U(a)?Y(s):s,e(s),S!==null&&n.add(S),await Se(),s!==(s=r())){var v=a.selectionStart,_=a.selectionEnd;a.value=s??"",_!==null&&(a.selectionStart=v,a.selectionEnd=Math.min(_,a.value.length))}}),(M&&a.defaultValue!==a.value||Ce(r)==null&&a.value)&&(e(U(a)?Y(a.value):a.value),S!==null&&n.add(S)),De(()=>{var f=r();if(a===document.activeElement){var s=Ie??S;if(n.has(s))return}U(a)&&f===Y(a.value)||a.type==="date"&&!f&&!a.value||f!==a.value&&(a.value=f??"")})}function U(a){var r=a.type;return r==="number"||r==="range"}function Y(a){return a===""?null:+a}var qe=ae('<li><input type="checkbox"/> <button>Delete</button></li>'),ze=ae('<h1 class="ms-3 text-blue-600">Todo List</h1> <input placeholder="New task" class="ms-3"/> <button class="ms-3">Add</button> <ul class="list-none ms-3"></ul>',1);function je(a,r){Oe(r,!1);let e=X([]),n=X("");async function f(){const i=await(await fetch("/api/todos")).json();H(e,i)}async function s(){if(!E(n))return;const i=await(await fetch("/api/todos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({task:E(n),completed:!1})})).json();H(e,[...E(e),i]),H(n,"")}async function v(t){await fetch(`/api/todos/${t.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...t,completed:!t.completed})}),t.completed=!t.completed}async function _(t){console.log(`Deleting todo with id: ${t}`),await fetch(`/api/todos/${t}`,{method:"DELETE"}),H(e,E(e).filter(i=>i.id!==t))}le(f),Je();var p=ze(),d=R(Re(p),2);Q(d);var m=R(d,2),y=R(m,2);Ye(y,5,()=>E(e),Pe,(t,i)=>{var l=qe(),o=Ve(l);Q(o);var u=R(o),w=R(u);G(l),$e(()=>{Le(o,E(i).completed),ie(u,` ${E(i).task??""} `)}),V("change",o,()=>v(E(i))),V("click",w,()=>_(E(i).id)),F(t,l)}),G(y),Xe(d,()=>E(n),t=>H(n,t)),V("click",m,s),F(a,p),He()}export{je as component};
